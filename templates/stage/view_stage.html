{% extends "common/base.html" %}
{% block body %}


    <div class="row mx-auto">
        <p class="  display-5 text-center mb-3">STAGE <i class="fa-solid fa-people"></i></p>
    </div>

    <ul class="nav nav-pills my-3 flex-column justify-content-center flex-sm-row" id="pills-tab" role="tablist">
        <li class="nav-item" role="presentation">
            <button class="nav-link active" id="pills-home-tab" data-bs-toggle="pill" data-bs-target="#pills-home" type="button" role="tab" aria-controls="pills-home" aria-selected="true">Presentations</button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="pills-profile-tab" data-bs-toggle="pill" data-bs-target="#pills-profile" type="button" role="tab" aria-controls="pills-profile" aria-selected="false">Stage Detail</button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="pills-contact-tab" data-bs-toggle="pill" data-bs-target="#pills-contact" type="button" role="tab" aria-controls="pills-contact" aria-selected="false">Stats</button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="pills-contact-tab" data-bs-toggle="pill" data-bs-target="#pills-contact" type="button" role="tab" aria-controls="pills-contact" aria-selected="false">My Review</button>
        </li>

    </ul>

    <div class="tab-content my-3" id="pills-tabContent">
        <div class="tab-pane fade show active my-3" id="pills-home" role="tabpanel" aria-labelledby="pills-home-tab" tabindex="0">
            <div class='col-md-12 d-flex justify-content-center'>

                {% if presentations %}
                    <table class="table  table-striped table-hover table-dark">
                        <thead>
                        <tr>
                            <th scope="col">Presentations</th>
                            <th scope="col">Type</th>
                            <th scope="col">Owner</th>
                            <th scope="col">Presentation Date</th>
                            <th scope="col">Status</th>
                        </tr>
                        </thead>
                        <tbody class="table-hover ">
                        {% for pres in presentations %}
                            {% if user == stage.user %}
                                <tr>
                                    <th scope="row"><a href="{% url 'detail_presentation' pres.id %}">{{ pres.pres_name }} </a></th>
                                    <td>{{ pres.type }}</td>
                                    <td>{{ pres.owner }}</td>
                                    <td>{{ pres.pres_date }}</td>
                                    <td><a href="{% url 'status' pres.id %}">{{ pres.approval }}</a></td>
                                </tr>

                            {% elif pres.approval == "Approved" %}
                                <tr>
                                    <th scope="row"><a href="{% url 'detail_presentation' pres.id %}">{{ pres.pres_name }} </a></th>
                                    <td>{{ pres.type }}</td>
                                    <td>{{ pres.owner }}</td>
                                    <td>{{ pres.pres_date }}</td>
                                    <td>Available</td>
                                </tr>




                            {% elif user == pres.owner %}
                                <tr>
                                    <th scope="row"><a href="{% url 'detail_presentation' pres.id %}">{{ pres.pres_name }} </a></th>
                                    <td>{{ pres.type }}</td>
                                    <td>{{ pres.owner }}</td>
                                    <td>{{ pres.pres_date }}</td>
                                    {% if pres.approval == "Unapproved"%}
                                        <td  class="text-warning fw-bold" >{{ pres.approval}}</td>
                                    {% elif pres.approval == "Declined"%}
                                        <td class="text-danger fw-bold">{{ pres.approval}}</td>
                                    {% else %}
                                        <td class="text-success fw-bold">{{ pres.approval}}</td>
                                    {% endif %}

                                </tr>

                            {% else %}
                            {% endif %}
                        {% endfor %}

                        </tbody>
                    </table>
                {% else %}
                    <div class="alert alert-info mt-4" role="alert">
                       <h5 class="text-dark "><i class="fa-solid fa-circle-info"></i> There arent any presentations scheduled on this stage. <i class="fa-solid fa-circle-info"></i></h5>
                    </div>

                {% endif %}



            </div>
        </div>

        <div class="tab-pane fade" id="pills-profile" role="tabpanel" aria-labelledby="pills-profile-tab" tabindex="0">>
            <div class="card" style="width:80%; height: 50%">
                <img src="{{ stage.Stage_image.url}}" class="card-img-top" alt="Stage image" width="40%" height="40%">
                <div class="card-body">
                    <h5 class="card-title text-center">{{ stage.stage_name}}</h5>
                    <hr style="color: #18d26e">
                    <p class="card-text">{{ stage.stage_description}}</p>

                    <p class="card-text text-danger">Click here to Vote your favorite Presentations out of all the presentation in this stage</p>
                    <a href="#" class="btn btn-secondary ">Vote </a>
                </div>
            </div>
        </div>

        <div class="tab-pane fade" id="pills-contact" role="tabpanel" aria-labelledby="pills-contact-tab" tabindex="0">
            <div class="row my-3">
                <div class="col-12 ">
                    <script>
                        drawChart({{ data }})
                    </script>
                    <p id='review1_avg'class='must-be-hidden'>55</P>
                    <p id='review2_avg' class='must-be-hidden'>55</P>
                    <p id='review3_avg' class='must-be-hidden'>69</P>
                    <!--Div that will hold the pie chart-->
                    <div id="columnchart_values" style="width: 100%; height: 35%;"></div>
                </div>
            </div>
        </div>
        <div class="tab-pane fade" id="pills-disabled" role="tabpanel" aria-labelledby="pills-disabled-tab" tabindex="0">
            <p>This is some placeholder content the Home tab's associated content. Clicking another tab will toggle the visibility of this one for the next. The tab JavaScript swaps classes to control the content visibility and styling. You can use it with tabs, pills, and any other .nav-powered navigation.</p>
        </div>

    </div>


    </div>





{% endblock %}