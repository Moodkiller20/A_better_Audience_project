{% extends "common/base.html" %}



{% block body %}

    <div class="row mx-auto">
        <p class="  display-5 text-center mb-3">PRESENTATION <i class="fa-solid fa-people"></i></p>
    </div>

    <ul class="nav nav-pills my-3 flex-column justify-content-center flex-sm-row" id="pills-tab" role="tablist">
        <li class="nav-item" role="presentation">
            <button class="nav-link active" id="pills-home-tab" data-bs-toggle="pill" data-bs-target="#pills-home" type="button" role="tab" aria-controls="pills-home" aria-selected="true">Presentation Detail</button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="pills-profile-tab" data-bs-toggle="pill" data-bs-target="#pills-profile" type="button" role="tab" aria-controls="pills-profile" aria-selected="false">Reviews</button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="pills-contact-tab" data-bs-toggle="pill" data-bs-target="#pills-contact" type="button" role="tab" aria-controls="pills-contact" aria-selected="false">Stats</button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="pills-contact-tab" data-bs-toggle="pill" data-bs-target="#pills-contact" type="button" role="tab" aria-controls="pills-contact" aria-selected="false">My Review</button>
        </li>

    </ul>



    <div class="tab-content my-3" id="pills-tabContent">

        {#    Presentation detail#}
        <div class="tab-pane fade show active my-3" id="pills-home" role="tabpanel" aria-labelledby="pills-home-tab" tabindex="0">
            <h1 class="text-center my-4">{{ presentations.pres_name}}</h1>
            <div class="col-lg-12 mx-3">
                <div class="card" style="width:80%;">
                    <img src="{{ presentations.pres_image.url}}" class="card-img-top" alt="..." >
                    <div class="card-body">
                        <h5 class="card-title">{{ presentations.pres_name}}</h5>
                        <hr style="color: #18d26e">
                        <p class="card-text">{{ presentations.pres_description}}</p>
                        <a href="{{ presentations.pres_file.url}}">Download Presentation files</a>
                        <hr style="color: #18d26e">
                        <p class="card-text"> Presentation Owner: <span class="card-text fw-bold">{{ presentations.owner}}</span></p>


                        {%if user == presentations.owner %}
                        {% else %}
                            <a href="{% url 'evaluate_presentation' presentations.id %}" class="btn btn-secondary color-white">Review</a>
                        {% endif%}
                    </div>
                </div>
            </div>
        </div>
        {#    Presentation reviews#}

        <div class="tab-pane fade" id="pills-profile" role="tabpanel" aria-labelledby="pills-profile-tab" tabindex="0">
        <div class="row">
            <div class="col-md-12 d-flex justify-content-center">
                 {%if user == presentations.owner %}
                 {% if reviews %}
            <table class="table  table-striped table-hover table-light">
                <thead>
                <tr>
                    <th scope="col">Author</th>
                    <th scope="col">Rubric</th>
                    <th scope="col">Score</th>
                    {#                    <th scope="col">Review 3 1-100</th>#}
                    {#                    <th scope="col">Date Created</th>#}
                    {#                    <th scope="col">Last Edited</th>#}

                </tr>
                </thead>
                <tbody class="table-hover ">

                    {% for review in reviews %}
                        {% if review.pres_reviewed == presentations %}
                            <tr>
                                <td>{{ review.author }}</td>
                                <td>{{ review.question }}</td>
                                <td>{{ review.answer }}</td>
                            </tr>
                        {% endif %}
                    {% endfor %}
                    {% else %}
                    <div class="alert alert-info mt-4" role="alert">
                        <h5 class="text-dark text-center "><i class="fa-solid fa-circle-info"></i> There arent any reviews for this presentatio. <i class="fa-solid fa-circle-info"></i></h5>
                    </div>
                    {% endif%}
                {% endif%}
                </tbody>
            </table>
            </div>

        </div>

        </div>

        {#    Stats#}
        <div class="tab-pane fade" id="pills-contact" role="tabpanel" aria-labelledby="pills-contact-tab" tabindex="0">
            <div class="row my-3 ">
                <div class="col-md-10 ">
                    {#            These tag contain the values for the JS Google Chart API#}
                    <p id='review1_avg'class='must-be-hidden'>{{review1_avg}}</P>
                    <p id='review2_avg' class='must-be-hidden'>{{review2_avg}}</P>
                    <p id='review3_avg' class='must-be-hidden'>{{review3_avg}}</P>
                    <!--Div that will hold the pie chart-->
                    <div id="barchart_values"></div>
                </div>
            </div>
        </div>

        <div class="tab-pane fade" id="pills-disabled" role="tabpanel" aria-labelledby="pills-disabled-tab" tabindex="0">
            <p>This is some placeholder content the Home tab's associated content. Clicking another tab will toggle the visibility of this one for the next. The tab JavaScript swaps classes to control the content visibility and styling. You can use it with tabs, pills, and any other .nav-powered navigation.</p>
        </div>

    </div>








{% endblock %}